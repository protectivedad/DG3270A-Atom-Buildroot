#!/bin/sh
#-----------------------------------------------------------------------------
# Copyright (c) 2012 Intel Corporation
#
# DISTRIBUTABLE AS SAMPLE SOURCE SOFTWARE
#
# This Distributable As Sample Source Software is subject to the terms and
# conditions of the Intel Software License Agreement provided with the Intel(R)
# Media Processor Software Development Kit.
#-----------------------------------------------------------------------------

SCRIPTNAME=$0
PATH=/usr/local/bin:/usr/bin:/bin:/sbin

. /etc/init.d/init_utilities

SOC_NAME=`get_soc_info_utility NAME STRING 2>/dev/null`

start_function() {

    if [ "$SOC_NAME" = "SOC_NAME_CE2600" ]; then
        /bin/icepm_daemon
    fi
}

stop_function() {
    if [ "$SOC_NAME" = "SOC_NAME_CE2600" ]; then
        killall icepm_daemon
        sleep 1
    fi
}

case $1 in
    "start")
        start_function
        ;;
    "stop")
        stop_function
        ;;
    "restart")
        stop_function
        start_function
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        ;;
esac
